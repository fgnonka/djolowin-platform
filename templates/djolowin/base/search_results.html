{% extends 'djolowin/main.html' %}

{% block content %}
    <h1>Search results</h1>

    <form method="get" action="{% url 'base:search' %}">
        <input type="text" name="q" placeholder="Search cards and collections" value="{{ request.GET.q }}">
        <select name="team">
            <option value="">All teams</option>
            {% for team in teams %}
                <option value="{{ team }}" {% if request.GET.team == team %}selected{% endif %}>{{ team }}</option>
            {% endfor %}
        </select>
        <select name="position">
            <option value="">All positions</option>
            {% for position in positions %}
                <option value="{{ position }}" {% if request.GET.position == position %}selected{% endif %}>{{ position }}</option>
            {% endfor %}
        </select>
        <select name="rarity">
            <option value="">All rarities</option>
            {% for rarity in rarities %}
                <option value="{{ rarity }}" {% if request.GET.rarity == rarity %}selected{% endif %}>{{ rarity }}</option>
            {% endfor %}
        </select>
        <button type="submit">Search</button>
    </form>

    {% if card_results %}
        <h2>Card results</h2>
        <p>Showing {{ card_results.count }} results for "{{ request.GET.q }}"</p>
        <ul>
            {% for card in card_results %}
                <li>{{ card.name }} ({{ card.team }} - {{ card.position }}) - {{ card.rarity }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if collection_results %}
        <h2>Collection results</h2>
        <p>Showing {{ collection_results.count }} results for "{{ request.GET.q }}"</p>
        <ul>
            {% for collection in collection_results %}
                <li>{{ collection.name }} - {{ collection.description }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}
